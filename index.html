<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button id="click-me">Click me</button>

    <script src="fake-api.js"></script>
    <script>
      const initialData = {
        posts: [
          { id: 1, title: "json-server", author: "typicode" },
          { id: 2, title: "json-server2", author: "typicode2" },
        ],
        "premium-posts": [
          { id: 1, title: "premium-json-server", author: "vivmagarwal" },
        ],
        comments: [{ id: 1, body: "some comment", postId: 1 }],
        profile: { name: "typicode" },
        users: [
          {
            id: 1,
            username: "admin",
            password: "admin",
            firstName: "Vivek",
            lastName: "Agarwal",
          },
        ],
      };
      const protectedData = [
        {
          route: "premium-posts",
          methods: ["GET", "PUT", "DELETE", "PATCH"],
        },
        { route: "posts", methods: ["POST"] },
      ];

      // Initialize the data
      initializeFakeApiData(initialData);
      setProtectedFakeApiData(protectedData);

      document
        .getElementById("click-me")
        .addEventListener("click", async function () {
          try {
            const loginData = {
              username: "admin",
              password: "admin",
            };

            const token =
              "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImV4cCI6MTY4MzMyMTYxNzgwOH0=.c2VjcmV0";

            const newPremiumPost = {
              title: "New Premium Post10",
              author: "John Doe10",
            };
            // const res = await mockFetch("/users");

            // const res = await mockFetch("/login", {
            //   method: "POST",
            //   headers: {
            //     "Content-Type": "application/json",
            //   },
            //   body: JSON.stringify(loginData),
            // })

            // const res = await mockFetch(
            //   "/premium-posts?q=new&_sort=author&_order=desc",
            //   {
            //     method: "GET",
            //     headers: {
            //       "Content-Type": "application/json",
            //       Authorization: token,
            //     },
            //   }
            // );

            const res = await fetch(
              "https://mockapi.com/premium-posts?q=new&_limit=3&_page=1",
              {
                method: "GET",
                headers: {
                  "Content-Type": "application/json",
                  Authorization: token,
                },
              }
            );

            // const res = await fetch(
            //   "https://jsonplaceholder.typicode.com/todos/1",
            //   {
            //     method: "GET",
            //     headers: {
            //       "Content-Type": "application/json",
            //       Authorization: token,
            //     },
            //   }
            // );

            // const res = await mockFetch("/premium-posts?q=prem", {
            //   method: "GET",
            //   headers: {
            //     "Content-Type": "application/json",
            //     Authorization: token,
            //   },
            // });

            // const res = await mockFetch('/premium-posts', {
            //   method: 'POST',
            //   headers: {
            //     'Content-Type': 'application/json',
            //     Authorization: token,
            //   },
            //   body: JSON.stringify(newPremiumPost),
            // })

            console.log(res);
            const data = await res.json();
            console.log(data);
          } catch (err) {
            console.log(err);
          }
        });
    </script>
  </body>
</html>
